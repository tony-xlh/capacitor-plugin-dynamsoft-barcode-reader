<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Dynamsoft Barcode Reader Example</title>
  <meta name="description" content="A light foundation for your next frontend project based on webpack.">
</head>
<body>
  <div id="content" style="max-width: 100%;">
    <h1>Dynamsoft Barcode Reader Example</h1>
    <p>Result:<div id="results"></div></p>
    <button type="button" onClick="startScan()">Start Scan</button>

    <p>This example uses the Android/iOS version of Dynamsoft Barcode Reader. You can also try <a onclick='GoToJS()' style="text-decoration:underline;">the JavaScript version</a>.</p>
  </div>
  
  <script>
    async function startScan(){
      document.getElementById("content").style.display = "none";
      document.body.style.backgroundColor = "transparent";
      await DBR.startScan({continuous:false});
      DBR.addListener('onFrameRead', async (retObj) => {
        console.log(retObj);
        let results = retObj["results"];
        if (results.length>0) {
          let text = "";
          for (let index = 0; index < results.length; index++) {
            const result = results[index];
            text = text + result.barcodeText + "<br/>";
          }
          document.getElementById("results").innerHTML = text;
          document.getElementById("content").style.display = "";
          document.body.style.backgroundColor = "white";
        }
        
      });
    }

    function GoToJS(){
      window.location.href = "https://pwa.xulihang.me/barcodereader/";
    }
  </script>
</body>
</html>
